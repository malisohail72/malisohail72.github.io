<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halal Investment Avenues</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
      /* --- Variables & Modern Reset --- */
      :root {
        --primary-color: #006400; /* Dark Green */
        --primary-darker: #004d00;
        --secondary-color: #f8f9fa; /* Slightly off-white */
        --accent-color: #FFD700; /* Gold */
        --accent-darker: #e6c300;
        --text-color: #343a40; /* Darker Gray */
        --light-text: #fff;
        --border-color: #dee2e6;
        --shadow-color: rgba(0,0,0,0.1);
        --container-width: 960px;
        --base-font-size: 1rem; /* 16px */
        --border-radius: 5px;
        --transition-speed: 0.3s;
      }

      *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
      html { scroll-behavior: smooth; } /* Smooth scrolling */
      body {
        font-family: 'Poppins', sans-serif;
        line-height: 1.7;
        color: var(--text-color);
        background-color: var(--light-text);
        font-size: var(--base-font-size);
        -webkit-font-smoothing: antialiased; /* Nicer font rendering */
        -moz-osx-font-smoothing: grayscale;
      }
      img, picture, video, canvas, svg { display: block; max-width: 100%; }
      input, button, textarea, select { font: inherit; }
      ul { list-style: none; }
      a { color: var(--primary-color); text-decoration: none; }
      a:hover { text-decoration: underline; }
      h1, h2, h3 { margin-bottom: 1rem; color: var(--primary-color); font-weight: 600; line-height: 1.3; }
      h1 { font-size: 2.5rem; }
      h2 { font-size: 2rem; }
      h3 { font-size: 1.5rem; }

      /* --- Layout & Container --- */
      .container { max-width: var(--container-width); margin: 0 auto; padding: 0 20px; }
      main { padding-top: 20px; }
      section { padding: 50px 20px; max-width: var(--container-width); margin: 0 auto; }
      section:nth-child(even) { background-color: var(--secondary-color); }

      /* --- Header & Navigation --- */
      header {
        background: var(--primary-color);
        color: var(--light-text);
        padding: 1rem 0;
        position: sticky; top: 0; z-index: 100;
        box-shadow: 0 2px 5px var(--shadow-color);
      }
      header nav {
        max-width: var(--container-width); margin: auto; padding: 0 20px;
        display: flex; justify-content: space-between; align-items: center;
        position: relative; /* Needed for absolute positioning in mobile if used */
      }
      header .logo { font-size: 1.5rem; font-weight: 700; z-index: 101; /* Ensure logo stays above mobile menu if absolute */ }

      /* Desktop Navigation List */
      header nav ul#nav-menu {
        display: flex;
        align-items: center; /* Align items vertically in the flex container */
      }
      header nav ul li { margin-left: 25px; }
      header nav ul li a {
        color: var(--light-text);
        padding: 6px 12px;
        border-radius: var(--border-radius);
        transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
        display: inline-block; /* Allows transform */
        text-decoration: none;
      }
      header nav ul li a:hover,
      header nav ul li a.active {
        background-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px); /* Subtle lift */
        text-decoration: none;
      }

      /* Hamburger Toggle Button */
      #nav-toggle {
        display: none; /* Hidden by default on larger screens */
        flex-direction: column;
        justify-content: space-around;
        width: 30px;
        height: 25px;
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 0;
        z-index: 101; /* Ensure toggle is clickable above menu */
      }
      #nav-toggle:focus { outline: 1px dashed var(--light-text); outline-offset: 2px; } /* Basic focus style */
      #nav-toggle span {
        display: block; /* Ensure spans behave correctly */
        width: 30px;
        height: 3px;
        background: var(--light-text);
        border-radius: 10px;
        transition: all 0.3s ease-in-out; /* Smoother transition for animation */
        position: relative; /* Needed for transform-origin */
        transform-origin: center; /* Rotate around center */
      }

      /* Hamburger Icon Animation (to 'X') */
      #nav-toggle.open span:nth-child(1) { transform: translateY(8px) rotate(45deg); }
      #nav-toggle.open span:nth-child(2) { opacity: 0; transform: translateX(-20px);} /* Fade and slide out */
      #nav-toggle.open span:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }


      /* --- Hero Section --- */
      #hero {
        text-align: center;
        padding: 80px 20px;
        background: linear-gradient(rgba(0, 80, 0, 0.75), rgba(0, 80, 0, 0.75)), url('https://via.placeholder.com/1200x400?text=Ethical+Investing') no-repeat center center/cover; /* Slightly darker overlay */
        color: var(--light-text);
        border-radius: 0 0 var(--border-radius) var(--border-radius); /* Rounded bottom corners */
        margin-bottom: 30px; /* Space below hero */
      }
      #hero h1 { color: var(--light-text); margin-bottom: 0.5rem; }
      #hero p { font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.9; }

      /* --- Buttons --- */
      .cta-button, #zakat-form button {
        display: inline-block;
        padding: 12px 28px;
        border-radius: var(--border-radius);
        font-weight: 600;
        transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
        cursor: pointer; border: none;
        text-decoration: none;
      }
      .cta-button { background: var(--accent-color); color: var(--primary-darker); }
      .cta-button:hover { background-color: var(--accent-darker); transform: translateY(-2px); text-decoration: none; }
      #zakat-form button { background: var(--primary-color); color: var(--light-text); }
      #zakat-form button:hover { background-color: var(--primary-darker); transform: translateY(-2px); }

      /* Focus states for accessibility */
      .cta-button:focus-visible, #zakat-form button:focus-visible, #zakat-form input:focus-visible {
         outline: 2px solid var(--primary-darker);
         outline-offset: 2px;
      }


      /* --- About & Resources Lists --- */
      #about ul, #resources ul { list-style: disc; margin: 0 0 1rem 25px; }
      #resources ul ul { list-style: circle; margin: 5px 0 10px 20px; }
      #resources li { margin-bottom: 10px; }
      #resources a { font-weight: 600; }

      /* --- Investment Avenues --- */
      .avenue-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Slightly larger min width */
        gap: 25px;
      }
      .avenue-card, .calculator, .chart-container { /* Common card styles */
        background: var(--light-text);
        padding: 25px;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        box-shadow: 0 3px 8px rgba(0,0,0,0.05); /* Softer shadow */
        transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
        margin-bottom: 25px;
      }
      .avenue-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 15px var(--shadow-color); /* Enhanced hover shadow */
      }
      .avenue-card h3 { margin-top: 0; } /* Remove potential top margin */


      /* --- Calculators & Forms --- */
      #zakat-form label { display: block; margin-bottom: 6px; font-weight: 600; }
      #zakat-form input[type="number"] {
        width: 100%;
        padding: 10px 12px;
        margin-bottom: 10px;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        font-size: 1rem;
        transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
      }
       #zakat-form input[type="number"]:focus {
         border-color: var(--primary-color);
         box-shadow: 0 0 0 2px rgba(0, 100, 0, 0.2); /* Subtle focus glow */
         outline: none; /* Remove default */
       }
      #zakat-form small { display: block; margin: -5px 0 15px 0; font-size: 0.85rem; color: #6c757d; }
      #zakat-result {
        margin-top: 20px;
        font-weight: 600; /* Bolder result */
        font-size: 1.1rem;
        padding: 15px;
        background-color: var(--secondary-color);
        border-left: 5px solid var(--primary-color);
        border-radius: 0 var(--border-radius) var(--border-radius) 0;
        line-height: 1.5;
      }

      /* --- Charts --- */
      .chart-container { position: relative; }
      .chart-container small { display: block; text-align: center; margin-top: 15px; font-size: 0.85rem; color: #6c757d; }

      /* --- Footer --- */
      footer {
        background: var(--text-color);
        color: #adb5bd; /* Lighter gray for footer text */
        text-align: center;
        padding: 30px 20px;
        margin-top: 40px;
        font-size: 0.9rem;
      }
      footer p:first-child { color: var(--light-text); margin-bottom: 10px;}
      footer .disclaimer {
        font-size: 0.8rem; color: #6c757d; /* Even lighter for disclaimer */
        margin-top: 15px;
        max-width: 800px; margin-left: auto; margin-right: auto; line-height: 1.5;
      }
       footer .disclaimer strong { color: #adb5bd; }

      /* --- Responsive --- */
      @media (max-width: 768px) {
        h1 { font-size: 2rem; }
        h2 { font-size: 1.75rem; }
        h3 { font-size: 1.3rem; }
        .container, header nav { padding: 0 15px; }

        /* Show Hamburger Toggle */
        #nav-toggle { display: flex; }

        /* Mobile Navigation Menu Styling */
        header nav ul#nav-menu {
            /* Hide by default using max-height for transition */
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding var(--transition-speed) ease-out; /* Smooth transition */

            /* Style as a dropdown block */
            position: absolute; /* Take out of flow */
            top: 100%; /* Position below header */
            left: 0;
            right: 0;
            background-color: var(--primary-darker); /* Darker background for dropdown */
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 0; /* No padding when closed */
            margin: 0;
            flex-direction: column; /* Stack links vertically */
            align-items: stretch; /* Make items take full width */
            border-radius: 0 0 var(--border-radius) var(--border-radius); /* Rounded bottom corners */
        }
        /* Style for when menu is OPEN */
        header nav ul#nav-menu.active {
            max-height: 500px; /* Large enough height to show all items */
            padding: 10px 0; /* Add padding when open */
        }
        header nav ul li {
            margin: 0; /* Reset desktop margin */
            width: 100%;
        }
        header nav ul li a {
            display: block; /* Make links full width */
            text-align: left; /* Align text left */
            padding: 12px 20px; /* Adjust padding for mobile */
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Separator */
            border-radius: 0; /* Remove individual radius */
            transition: background-color var(--transition-speed) ease; /* Only transition color */
            transform: none; /* Remove desktop hover transform */
        }
        header nav ul li:last-child a { border-bottom: none; }
        header nav ul li a:hover,
        header nav ul li a.active {
            background-color: rgba(255, 255, 255, 0.1); /* Subtle hover/active */
            transform: none; /* Ensure no transform */
        }

        /* Rest of mobile styles */
        #hero { padding: 60px 15px; }
        .avenue-container { grid-template-columns: 1fr; gap: 20px; } /* Stack cards */
        section { padding: 40px 15px; }
        .calculator, .chart-container { padding: 20px; }
      }
    
    
    
    
    
    
    
    
    
      /* Calculator specific styles */
    .section-intro {
        text-align: center;
        margin-bottom: 30px;
        font-size: 1.1rem;
    }
    
    .calculator {
        background: var(--light-text);
        padding: 25px;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        box-shadow: 0 3px 8px rgba(0,0,0,0.05);
        margin-bottom: 30px;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .calculator label {
        display: block;
        margin-bottom: 6px;
        font-weight: 600;
    }
    
    .calculator input[type="number"] {
        width: 100%;
        padding: 10px 12px;
        margin-bottom: 5px;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        font-size: 1rem;
        transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    }
    
    .calculator input[type="number"]:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(0, 100, 0, 0.2);
        outline: none;
    }
    
    .calculator small {
        display: block;
        margin-bottom: 5px;
        font-size: 0.85rem;
        color: #6c757d;
    }
    
    .calc-button {
        display: inline-block;
        padding: 12px 28px;
        background: var(--primary-color);
        color: var(--light-text);
        border-radius: var(--border-radius);
        font-weight: 600;
        transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
        cursor: pointer;
        border: none;
        text-decoration: none;
        margin-top: 10px;
    }
    
    .calc-button:hover {
        background-color: var(--primary-darker);
        transform: translateY(-2px);
    }
    
    .result-container {
        margin-top: 20px;
        padding: 15px;
        background-color: var(--secondary-color);
        border-left: 5px solid var(--primary-color);
        border-radius: 0 var(--border-radius) var(--border-radius) 0;
        display: none;
    }
    
    .result-container h4 {
        margin-top: 0;
        color: var(--primary-color);
    }
    
    .result-summary {
        font-weight: 600;
        font-size: 1.1rem;
        margin-bottom: 10px;
    }
    
    .result-detail {
        margin-bottom: 5px;
    }
    
    /* Investment options styling */
    .investment-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
        margin-bottom: 10px;
    }
    
    .investment-option {
        background-color: var(--secondary-color);
        border: 2px solid var(--border-color);
        border-radius: var(--border-radius);
        padding: 10px;
        text-align: center;
        cursor: pointer;
        transition: all var(--transition-speed) ease;
        font-weight: 500;
        color: var(--text-color);
    }
    
    .investment-option .rate {
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--primary-color);
    }
    
    .investment-option.selected {
        background-color: var(--primary-color);
        color: var(--light-text);
        border-color: var(--primary-color);
    }
    
    .investment-option.selected .rate {
        color: var(--light-text);
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .investment-options {
            grid-template-columns: 1fr 1fr;
        }
    }
    
    @media (max-width: 480px) {
        .investment-options {
            grid-template-columns: 1fr;
        }
    }
    
    
    
    
    
    
    
    
    
    
    
    
  


    /* KMI30 Chart Specific Styles */
    .chart-container {
        background: var(--light-text);
        padding: 25px;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        box-shadow: 0 3px 8px rgba(0,0,0,0.05);
        margin-bottom: 30px;
    }
    
    .chart-container h3 {
        margin-top: 0;
        margin-bottom: 20px;
        text-align: center;
        color: var(--primary-color);
    }
    
    .time-period-selector {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px;
    }
    
    .time-button {
        background-color: var(--secondary-color);
        border: 1px solid var(--border-color);
        color: var(--text-color);
        border-radius: var(--border-radius);
        padding: 8px 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all var(--transition-speed) ease;
    }
    
    .time-button:hover {
        background-color: rgba(0, 100, 0, 0.1);
    }
    
    .time-button.selected {
        background-color: var(--primary-color);
        color: var(--light-text);
        border-color: var(--primary-darker);
    }
    
    .responsive-chart-wrapper {
        position: relative;
        height: 0;
        width: 100%;
        padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
        margin-bottom: 15px;
    }
    
    .responsive-chart-wrapper canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100% !important;
        height: 100% !important;
    }
    
    .chart-container small {
        display: block;
        text-align: center;
        color: #6c757d;
        font-size: 0.85rem;
    }
    
    /* Responsive adjustments */
    @media (max-width: 576px) {
        .time-period-selector {
            justify-content: space-between;
        }
        
        .time-button {
            padding: 6px 12px;
            font-size: 0.9rem;
            flex: 1 0 calc(50% - 5px);
            text-align: center;
        }
        
        .responsive-chart-wrapper {
            padding-bottom: 75%; /* Taller on mobile */
        }
    }
    
    
    
    </style>

</head>
<body>

    <header>
        <nav>
            <div class="logo">The Halal Investor</div>
            <button id="nav-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="nav-menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul id="nav-menu">
                <li><a href="#about">About</a></li>
                <li><a href="#avenues">Avenues</a></li>
                <li><a href="#calculators">Calculators</a></li>
                <li><a href="#charts">Charts</a></li>
                <li><a href="#resources">Resources</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="hero">
            <div class="container"> <h1>Invest Islamically, Grow Confidently</h1>
                <p> Explore Shariah-compliant investment opportunities aligned with Islamic values.</p>
                <a href="#avenues" class="cta-button">Discover Your Avenues</a>
            </div>
        </section>

        <section id="about">
             <div class="container">
                <h2> Understanding Halal Investment</h2>
                <p>Halal investing adheres to Islamic principles, ensuring financial activities are ethical and socially responsible. Key principles include:</p>
                <ul>
                    <li><strong>Prohibition of Riba (Interest):</strong> Avoiding investments generating income through interest.</li>
                    <li><strong>Prohibition of Gharar (Excessive Uncertainty):</strong> Avoiding overly speculative investments.</li>
                    <li><strong>Prohibition of Maysir (Gambling):</strong> Avoiding investments related to gambling.</li>
                    <li><strong>Avoiding Haram Industries:</strong> Excluding sectors like alcohol, pork, conventional finance, etc.</li>
                    <li><strong>Profit and Loss Sharing:</strong> Preferring structures like Mudarabah and Musharakah.</li>
                    <li><strong>Asset-Backed Transactions:</strong> Investments linked to tangible assets (e.g., Sukuk).</li>
                </ul>
                <p>The goal is financial growth while upholding ethical and religious values.</p>
            </div>
        </section>

        <section id="avenues">
            <div class="container">
                <h2><center> 🕌 Halal Investment Avenues </center> </h2>
                <div class="avenue-container">
                    <div class="avenue-card">
                        <h3>Shariah-Compliant Stocks</h3>
                        <p>Shares in companies passing Shariah screening (business activities, financial ratios). Requires careful analysis.</p>
                         <button>  Find Companies </button>
                    </div>
                    <div class="avenue-card">
                        <h3>Sukuk (Islamic Bonds)</h3>
                        <p>Asset-based securities providing profit-based returns, not interest (e.g., Ijarah or Murabaha structures).</p>
                         <button> Find Sukuks  </button>
                    </div>
                    <div class="avenue-card">
                        <h3>Real Estate</h3>
                        <p>Direct investment in properties for rental income or appreciation. Needs Shariah-compliant financing.</p>
                         <button> Find Real Estate   </button>
                    </div>
                    
                    <div class="avenue-card">
                        <h3>Halal Mutual Funds & ETFs</h3>
                        <p>Managed funds investing in diversified Shariah-compliant assets (stocks, sukuk). Follow Islamic indices.</p>
                         <button> Find Mutual Funds & ETF's  </button>
                    </div>
                    
                     <div class="avenue-card">
                        <h3>Gold & Precious Metals</h3>
                        <p>Store of value. Invest in physical metal or allocated accounts, avoiding interest-based derivatives.</p>
             <button> Know More   </button>
                            </div>
                            
                            
                     <div class="avenue-card">
                        <h3>Halal Start-ups/Crowdfunding</h3>
                        <p>Equity in early-stage, Shariah-compliant businesses, often via specific platforms.</p>
                         <button>  Know More </button>
                    </div>
                    
                    
                     <div class="avenue-card">
                        <h3>Halal REITs</h3>
                        <p>Trusts owning/managing Shariah-compliant properties, distributing income to investors.</p>
                         <button> Find REIT's  </button>
                    </div>
                    
                    
                     <div class="avenue-card">
                        <h3>Islamic Banking Accounts</h3>
                        <p>Profit-sharing savings and deposit accounts offered by Islamic banks, avoiding interest.</p>
                         <button> Find Islamic Banks.  </button>
                    </div>
                    
                    
                </div>
            </div>
        </section>

     
                
                

                 <div class="calculator">
                    <h3>Portfolio Growth Calculator (Placeholder)</h3>
                    <p>Estimate future investment value based on contributions and expected Halal returns.</p>
                    <p><i>[Functionality to be added: requires inputs like initial amount, regular contribution, expected profit rate, duration.]</i></p>
                 </div>
                
                
                
                
                <!-- ====== Calculators Section ====== -->
<section id="calculators">
    <div class="container">
        <h2><center>🧮 Halal Investment Calculators</center></h2>
        <p class="section-intro">Plan your financial future with these Shariah-compliant calculators designed for Pakistani investors.</p>
        
        <!-- Simple Savings Calculator -->
        <div class="calculator">
            <h3>Simple Savings Calculator</h3>
            <p>Calculate the growth of your savings over time without any riba (interest).</p>
            <form id="savings-form">
                <div class="form-group">
                    <label for="initial-savings">Initial Investment (PKR)</label>
                    <input type="number" id="initial-savings" name="initial-savings" min="0" step="1000" placeholder="e.g., 100000" required>
                    <small>Your starting investment amount in Pakistani Rupees.</small>
                </div>
                
                <div class="form-group">
                    <label for="monthly-savings">Monthly Contribution (PKR)</label>
                    <input type="number" id="monthly-savings" name="monthly-savings" min="0" step="1000" placeholder="e.g., 10000" required>
                    <small>How much you plan to add each month.</small>
                </div>
                
                <div class="form-group">
                    <label for="savings-duration">Number of Months</label>
                    <input type="number" id="savings-duration" name="savings-duration" min="1" max="600" placeholder="e.g., 36" required>
                    <small>How long you plan to save (1-600 months).</small>
                </div>
                
                <button type="submit" class="calc-button">Calculate Savings</button>
            </form>
            <div id="savings-result" class="result-container"></div>
        </div>
        
        <!-- Investment Calculator -->
        <div class="calculator">
            <h3>Halal Investment Growth Calculator</h3>
            <p>Compare potential returns from different Shariah-compliant investment avenues in Pakistan.</p>
            <form id="investment-form">
                <div class="form-group">
                    <label for="initial-investment">Initial Investment (PKR)</label>
                    <input type="number" id="initial-investment" name="initial-investment" min="0" step="1000" placeholder="e.g., 100000" required>
                    <small>Your starting investment amount in Pakistani Rupees.</small>
                </div>
                
                <div class="form-group">
                    <label for="monthly-investment">Monthly Contribution (PKR)</label>
                    <input type="number" id="monthly-investment" name="monthly-investment" min="0" step="1000" placeholder="e.g., 10000" required>
                    <small>How much you plan to add each month.</small>
                </div>
                
                <div class="form-group">
                    <label for="investment-duration">Number of Months</label>
                    <input type="number" id="investment-duration" name="investment-duration" min="1" max="600" placeholder="e.g., 36" required>
                    <small>Investment duration (1-600 months).</small>
                </div>
                
                <div class="form-group">
                    <label>Select Investment Type</label>
                    <div class="investment-options">
                        <button type="button" class="investment-option" data-rate="5">Islamic Bank Savings<br><span class="rate">5% p.a.</span></button>
                        <button type="button" class="investment-option" data-rate="7">Government Sukuk<br><span class="rate">7% p.a.</span></button>
                        <button type="button" class="investment-option" data-rate="10">PSX Shariah Index<br><span class="rate">10% p.a.</span></button>
                        <button type="button" class="investment-option" data-rate="8">Corporate Sukuk<br><span class="rate">8% p.a.</span></button>
                        <button type="button" class="investment-option" data-rate="12">Halal REITs<br><span class="rate">12% p.a.</span></button>
                    </div>
                    <input type="hidden" id="selected-rate" name="selected-rate" value="5">
                    <small>Historical average rates shown. Actual returns may vary.</small>
                </div>
                
                <button type="submit" class="calc-button">Calculate Growth</button>
            </form>
            <div id="investment-result" class="result-container"></div>
            <div id="investment-chart-container" class="chart-container" style="height: 300px; display: none;">
                <canvas id="investmentChart"></canvas>
            </div>
        </div>
    </div>
</section>
                
                
                
                
            </div>
        </section>
        
        
        

        <section id="charts">
            <div class="container">
                <h2>Market Insights (Examples)</h2>
                <div class="chart-container">
                    <h3>Hypothetical Halal Index Performance</h3>
                    <canvas id="halalIndexChart"></canvas>
                    <small>Note: Sample data for illustration only.</small>
                </div>
                
                
                
                <div class="chart-container">
                    <h3>Ideal Halal Portfolio Allocation</h3>
                    <canvas id="portfolioAllocationChart"></canvas>
                    <small>Note: Ideal allocation for investor.</small>
                </div>
            </div>
        </section>
        
        
        <br>
            
            
            
            
            

<div class="chart-container">
    <h3>KMI30 Islamic Index Performance</h3>
    <div class="time-period-selector">
        <button class="time-button selected" data-period="monthly">Monthly</button>
        <button class="time-button" data-period="quarterly">3 Months</button>
        <button class="time-button" data-period="yearly">Yearly</button>
        <button class="time-button" data-period="all">All Time</button>
    </div>
    <div class="responsive-chart-wrapper">
        <canvas id="kmi30Chart"></canvas>
    </div>
    <small>Data source: Pakistan Stock Exchange KMI-30 Shariah Compliant Index</small>
</div>

           
             
            
            
            
            
     
        <!-- KMI30 Index Chart Section -->
        
  
<script>
document.addEventListener('DOMContentLoaded', () => {
    // KMI30 Index Chart Functionality
    const kmi30ChartCanvas = document.getElementById('kmi30Chart');
    const timeButtons = document.querySelectorAll('.time-button');
    let kmi30Chart = null;
    
    // Sample KMI30 data (Replace with actual data)
    // Using realistic but sample data points for KMI30 index from Pakistan
    const kmi30Data = {
        // Monthly data (most recent 12 months)
        monthly: {
            labels: ['Apr 25', 'Mar 25', 'Feb 25', 'Jan 25', 'Dec 24', 'Nov 24', 'Oct 24', 'Sep 24', 'Aug 24', 'Jul 24', 'Jun 24', 'May 24'],
            values: [73500, 72800, 71200, 69900, 70500, 67800, 66500, 65200, 64800, 63100, 62500, 61800]
        },
        // Quarterly data (last 4 quarters)
        quarterly: {
            labels: ['Q1 2025', 'Q4 2024', 'Q3 2024', 'Q2 2024', 'Q1 2024', 'Q4 2023', 'Q3 2023', 'Q2 2023'],
            values: [71800, 68500, 64100, 62700, 59800, 57200, 54500, 52100]
        },
        // Yearly data
        yearly: {
            labels: ['2025 YTD', '2024', '2023', '2022', '2021', '2020', '2019', '2018', '2017', '2016', '2015'],
            values: [73500, 70500, 59800, 52300, 46700, 42100, 38500, 34200, 31800, 29500, 27100]
        },
        // All time (simplified data points)
        all: {
            labels: ['2025', '2024', '2023', '2022', '2021', '2020', '2019', '2018', '2017', '2016', '2015', '2014', '2013', '2012', '2011', '2010', '2009', '2008'],
            values: [73500, 70500, 59800, 52300, 46700, 42100, 38500, 34200, 31800, 29500, 27100, 24800, 22500, 19700, 17200, 15600, 13800, 12000]
        }
    };
    
    // Initialize chart with monthly data by default
    if (kmi30ChartCanvas) {
        createKMI30Chart('monthly');
    }
    
    // Time period button event listeners
    if (timeButtons) {
        timeButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Update button selection
                timeButtons.forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
                
                // Update chart with selected time period
                const period = button.getAttribute('data-period');
                createKMI30Chart(period);
            });
        });
    }
    
    // Function to create/update KMI30 chart
    function createKMI30Chart(period) {
        const data = kmi30Data[period];
        
        if (!data) return;
        
        // Destroy existing chart if it exists
        if (kmi30Chart) {
            kmi30Chart.destroy();
        }
        
        // Create chart configuration
        const chartConfig = {
            type: 'line',
            data: {
                labels: data.labels,
                datasets: [{
                    label: 'KMI30 Index',
                    data: data.values,
                    borderColor: 'rgb(0, 100, 0)',
                    backgroundColor: 'rgba(0, 100, 0, 0.1)',
                    borderWidth: 2,
                    pointRadius: 3,
                    pointBackgroundColor: 'rgb(0, 100, 0)',
                    tension: 0.2,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: `KMI30 Islamic Index - ${period.charAt(0).toUpperCase() + period.slice(1)} Performance`,
                        font: {
                            size: 16,
                            weight: 'bold'
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            label: function(context) {
                                return `KMI30: ${context.parsed.y.toLocaleString()} points`;
                            }
                        }
                    },
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        reverse: true, // Most recent data first
                        grid: {
                            display: false
                        },
                        ticks: {
                            maxRotation: 45,
                            minRotation: 45
                        }
                    },
                    y: {
                        beginAtZero: false,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        ticks: {
                            callback: function(value) {
                                if (value >= 10000) {
                                    return (value / 1000) + 'k';
                                }
                                return value;
                            }
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                },
                elements: {
                    point: {
                        radius: function(context) {
                            // Only show points on larger screens or for specific data points
                            const dataLength = context.chart.data.labels.length;
                            if (window.innerWidth < 768 && dataLength > 10) {
                                return context.dataIndex % 3 === 0 ? 3 : 0;
                            }
                            return 3;
                        }
                    }
                }
            }
        };
        
        // Create new chart
        kmi30Chart = new Chart(kmi30ChartCanvas.getContext('2d'), chartConfig);
    }
    
    // Handle window resize to ensure chart responsiveness
    window.addEventListener('resize', () => {
        if (kmi30Chart) {
            kmi30Chart.resize();
        }
    });
});
</script>
        
        
        
        
        
        
        
        
        
        
            
            
            
            
        

        <section id="resources">
            <div class="container">
                <h2>Helpful Resources</h2>
                <p>Explore platforms, tools, and information sources for Halal investing:</p>
                <ul>
                    <li><strong>Shariah Screening Tools:</strong>
                        <ul>
                            <li><a href="https://zoya.finance/" target="_blank" rel="noopener noreferrer">Zoya Finance</a></li>
                            <li>Check specific brokerage platforms</li>
                        </ul>
                    </li>
                    <li><strong>Halal Investment Platforms:</strong>
                        <ul>
                            <li><a href="https://www.wahed.com/" target="_blank" rel="noopener noreferrer">Wahed Invest</a></li>
                            <li><a href="https://ethis.co/" target="_blank" rel="noopener noreferrer">Ethis</a></li>
                            <li><a href="https://hilalinvest.com/" target="_blank" rel="noopener noreferrer">Hilal Invest</a> (PK)</li>
                             <li><a href="https://zeedsharia.com/" target="_blank" rel="noopener noreferrer">Zeed</a></li>
                             <li><a href="https://amalinvest.com/" target="_blank" rel="noopener noreferrer">Amal Invest</a></li>
                        </ul>
                    </li>
                     <li><strong>Islamic Indices (Reference):</strong>
                        <ul>
                            <li><a href="https://www.msci.com/islamic-investing" target="_blank" rel="noopener noreferrer">MSCI Islamic</a></li>
                            <li><a href="https://www.spglobal.com/spdji/en/indices/equity/dow-jones-islamic-market-world-index/" target="_blank" rel="noopener noreferrer">Dow Jones Islamic</a></li>
                             <li><a href="https://www.lseg.com/en/ftse-russell/indices/ftse-shariah-global-equity-indices" target="_blank" rel="noopener noreferrer">FTSE Shariah</a></li>
                        </ul>
                    </li>
                    <li><strong>Educational Resources:</strong>
                        <ul>
                            <li>Platform Blogs (Zoya, Wahed, etc.)</li>
                            <li><a href="https://www.investopedia.com/terms/s/shariah.asp" target="_blank" rel="noopener noreferrer">Investopedia: Shariah</a></li>
                            <li><a href="https://aaoifi.com/" target="_blank" rel="noopener noreferrer">AAOIFI Standards</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>
    </main>

    <footer>
         <div class="container">
            <p>&copy; <span id="current-year"></span> Halal Investment Guide. All Rights Reserved.</p>
            <p class="disclaimer"><strong>Disclaimer:</strong> Information is for educational purposes only, not financial advice. Halal investing also involves risks. Conduct your own research and consult Shariah advisors before investing. We are not affiliated with specific platforms unless stated.</p>
        </div>
    </footer>
    
    
    
    
    
    
    
    
    
    
    
    <!-- JavaScript for KMI30 chart functionality -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    // Check if Chart.js is available
    if (typeof Chart === 'undefined') {
        console.error('Chart.js is required for the KMI30 chart');
        return;
    }
    
    // KMI30 Index sample data (fictional but realistic for Pakistan market)
    const kmi30Data = {
        // Monthly data (30 days) - most recent first
        '1M': {
            labels: generateDateLabels(30, 1),
            values: [68241.92, 67946.65, 67800.32, 67924.76, 68120.45, 68326.19, 68109.54, 
                    67891.23, 67650.67, 67432.12, 67319.87, 67503.26, 67712.45, 67956.30, 
                    68213.76, 68120.12, 67945.67, 68102.34, 68352.12, 68576.54, 68432.12, 
                    68310.65, 68123.43, 67956.87, 67845.32, 68012.43, 68243.12, 68432.10, 
                    68324.54, 68241.92].reverse()
        },
        
        // 3 Month data (90 days)
        '3M': {
            labels: generateDateLabels(90, 3),
            values: [65212.43, 65432.12, 65567.23, 65789.32, 65632.12, 65432.15, 65267.43, 
                    65412.32, 65678.12, 65912.34, 66123.45, 66345.67, 66512.34, 66789.12, 
                    66983.45, 67124.35, 67324.56, 67543.21, 67689.43, 67843.23, 67956.34, 
                    68124.45, 68312.32, 68241.92, 68124.32, 67943.12, 67856.34, 67789.43, 
                    67912.43, 68043.23].reverse()
        },
        
        // 1 Year data (monthly points for a year)
        '1Y': {
            labels: ['Apr 24', 'May 24', 'Jun 24', 'Jul 24', 'Aug 24', 'Sep 24', 'Oct 24', 'Nov 24', 'Dec 24', 'Jan 25', 'Feb 25', 'Mar 25', 'Apr 25'],
            values: [58432.12, 59123.43, 59876.54, 60312.32, 60876.54, 61243.12, 61567.23, 
                    62456.76, 63234.54, 64567.23, 65789.12, 67213.45, 68241.92]
        },
        
        // All time data (yearly points)
        'ALL': {
            labels: ['2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024', '2025'],
            values: [32453.23, 37654.34, 41234.56, 38765.43, 42345.67, 40123.45, 48765.43, 54321.01, 58912.34, 64567.23, 68241.92]
        }
    };
    
    // Initialize chart with monthly data
    let currentPeriod = '1M';
    let kmi30Chart = null;
    
    // Create the chart
    createKMI30Chart(currentPeriod);
    
    // Add event listeners to period buttons
    const periodButtons = document.querySelectorAll('.period-button');
    periodButtons.forEach(button => {
        button.addEventListener('click', () => {
            // Update selected button
            periodButtons.forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            
            // Update chart
            currentPeriod = button.getAttribute('data-period');
            createKMI30Chart(currentPeriod);
        });
    });
    
    // Function to create/update KMI30 chart
    function createKMI30Chart(period) {
        const ctx = document.getElementById('kmi30Chart').getContext('2d');
        
        // Destroy previous chart if exists
        if (kmi30Chart) {
            kmi30Chart.destroy();
        }
        
        // Get data for selected period
        const data = kmi30Data[period];
        
        // Calculate data for trend line (moving average)
        const trendData = calculateMovingAverage(data.values, period === '1M' ? 5 : (period === '3M' ? 7 : 3));
        
        // Create new chart
        kmi30Chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.labels,
                datasets: [
                    {
                        label: 'KMI30 Index',
                        data: data.values,
                        borderColor: 'rgba(0, 100, 0, 0.8)',
                        backgroundColor: 'rgba(0, 100, 0, 0.1)',
                        borderWidth: 2,
                        pointRadius: period === 'ALL' ? 4 : (period === '1Y' ? 3 : 1),
                        pointHoverRadius: 6,
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'Trend',
                        data: trendData,
                        borderColor: 'rgba(255, 140, 0, 0.7)',
                        borderWidth: 2,
                        pointRadius: 0,
                        borderDash: [5, 5],
                        tension: 0.4,
                        fill: false
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: getPeriodTitle(period),
                        font: {
                            size: 16,
                            weight: 'bold'
                        }
                    },
                    legend: {
                        display: false
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            label: function(context) {
                                if (context.datasetIndex === 0) {
                                    return `KMI30: ${context.raw.toLocaleString('en-PK')}`;
                                } else {
                                    return `Trend: ${context.raw.toLocaleString('en-PK')}`;
                                }
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            maxRotation: 45,
                            minRotation: 45,
                            font: {
                                size: 10
                            }
                        }
                    },
                    y: {
                        beginAtZero: false,
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString('en-PK');
                            }
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'nearest'
                }
            }
        });
        
        // Update min and max for better visualization
        const min = Math.min(...data.values);
        const max = Math.max(...data.values);
        const padding = (max - min) * 0.1;
        
        kmi30Chart.options.scales.y.min = Math.floor(min - padding);
        kmi30Chart.options.scales.y.max = Math.ceil(max + padding);
        kmi30Chart.update();
        
        // Calculate and display change values
        const latestValue = data.values[data.values.length - 1];
        const previousValue = data.values[data.values.length - 2];
        const change = latestValue - previousValue;
        const changePercent = (change / previousValue) * 100;
        
        // Update display values
        document.getElementById('current-index-value').textContent = latestValue.toLocaleString('en-PK');
        
        const changeElement = document.getElementById('index-change');
        const changeText = `${change >= 0 ? '+' : ''}${change.toFixed(2)} (${change >= 0 ? '+' : ''}${changePercent.toFixed(2)}%)`;
        changeElement.textContent = changeText;
        
        if (change >= 0) {
            changeElement.classList.remove('negative');
            changeElement.classList.add('positive');
        } else {
            changeElement.classList.remove('positive');
            changeElement.classList.add('negative');
        }
    }
    
    // Helper function to generate date labels
    function generateDateLabels(days, step = 1) {
        const labels = [];
        const today = new Date();
        
        for (let i = days - 1; i >= 0; i -= step) {
            const date = new Date();
            date.setDate(today.getDate() - i);
            
            if (days > 60) {
                // For longer periods, show only month/day
                labels.push(`${date.getMonth() + 1}/${date.getDate()}`);
            } else {
                // For shorter periods, show month/day
                labels.push(`${date.getMonth() + 1}/${date.getDate()}`);
            }
        }
        
        return labels;
    }
    
    // Helper function for moving average calculation
    function calculateMovingAverage(data, window) {
        const result = [];
        
        // Add null values at the beginning for alignment
        for (let i = 0; i < window - 1; i++) {
            result.push(null);
        }
        
        for (let i = 0; i <= data.length - window; i++) {
            const windowValues = data.slice(i, i + window);
            const average = windowValues.reduce((sum, value) => sum + value, 0) / window;
            result.push(average);
        }
        
        return result;
    }
    
    // Helper function to get period title
    function getPeriodTitle(period) {
        switch (period) {
            case '1M':
                return 'KMI30 Index - Last Month';
            case '3M':
                return 'KMI30 Index - Last 3 Months';
            case '1Y':
                return 'KMI30 Index - Last 12 Months';
            case 'ALL':
                return 'KMI30 Index - Historical Performance';
            default:
                return 'KMI30 Index Performance';
        }
    }
});
</script>
    

    <script>
    document.addEventListener('DOMContentLoaded', () => {
      // --- Navigation Toggle (Hamburger Menu) ---
      const navToggle = document.getElementById('nav-toggle');
      const navMenu = document.getElementById('nav-menu');

      if (navToggle && navMenu) {
        navToggle.addEventListener('click', () => {
          navMenu.classList.toggle('active'); // Toggle visibility class on menu
          navToggle.classList.toggle('open'); // Toggle class on button for 'X' animation

          // Toggle aria-expanded attribute for accessibility
          const isExpanded = navMenu.classList.contains('active');
          navToggle.setAttribute('aria-expanded', isExpanded);
        });

        // Optional: Close menu when a link is clicked (useful for single-page apps)
        navMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                if (navMenu.classList.contains('active')) {
                    navMenu.classList.remove('active');
                    navToggle.classList.remove('open');
                    navToggle.setAttribute('aria-expanded', 'false');
                }
            });
        });

         // Optional: Close menu if clicking outside the nav area on mobile
         document.addEventListener('click', (event) => {
            const isClickInsideNav = navMenu.contains(event.target);
            const isClickOnToggle = navToggle.contains(event.target);
            const isMobileView = window.innerWidth <= 768; // Check if in mobile view

            if (isMobileView && !isClickInsideNav && !isClickOnToggle && navMenu.classList.contains('active')) {
                navMenu.classList.remove('active');
                navToggle.classList.remove('open');
                navToggle.setAttribute('aria-expanded', 'false');
            }
         });
      }


      // --- Footer Year ---
      const currentYearSpan = document.getElementById('current-year');
      if (currentYearSpan) currentYearSpan.textContent = new Date().getFullYear();

      // --- Zakat Calculator ---
      const zakatForm = document.getElementById('zakat-form'); // Or use document.forms.zakatForm
      const zakatResultDiv = document.getElementById('zakat-result');

      if (zakatForm && zakatResultDiv) {
        zakatForm.addEventListener('submit', (e) => {
          e.preventDefault();
          // Using FormData is often cleaner
          const formData = new FormData(zakatForm);
          const cash = parseFloat(formData.get('cash')) || 0;
          const shortTermStocks = parseFloat(formData.get('short-term-stocks')) || 0;
          const longTermStocks = parseFloat(formData.get('long-term-stocks')) || 0;
          const otherAssets = parseFloat(formData.get('other-assets')) || 0;
          const nisab = parseFloat(formData.get('nisab')) || 0;

          const zakatableAmountLongTermStocks = longTermStocks * 0.25; // Consult scholar
          const totalZakatableAssets = cash + shortTermStocks + zakatableAmountLongTermStocks + otherAssets;

          let resultMessage = '';
          if (nisab <= 0) {
            resultMessage = 'Please enter a valid Nisab value.';
          } else if (totalZakatableAssets >= nisab) {
            const zakatDue = totalZakatableAssets * 0.025;
            resultMessage = `Total Zakatable Assets: ${totalZakatableAssets.toFixed(2)}<br>
                             Nisab Threshold: ${nisab.toFixed(2)}<br>
                             Calculated Zakat Due: <strong>$${zakatDue.toFixed(2)}</strong>`;
          } else {
            resultMessage = `Total Zakatable Assets: ${totalZakatableAssets.toFixed(2)}<br>
                             Nisab Threshold: ${nisab.toFixed(2)}<br>
                             Your wealth is below the Nisab threshold. No Zakat is due.`;
          }
          zakatResultDiv.innerHTML = resultMessage;
        });
      }

      // --- Chart.js Examples ---
      const createChart = (ctx, type, labels, datasets, options = {}) => {
        if (ctx) {
          new Chart(ctx, { type, data: { labels, datasets }, options });
        }
      };

      // 1. Halal Index Performance Chart
      const ctxIndex = document.getElementById('halalIndexChart')?.getContext('2d');
      createChart(
        ctxIndex, 'line',
        ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
        [{ label: 'Hypothetical Halal Index', data: [1000, 1020, 1015, 1050, 1080, 1070, 1100], borderColor: 'rgb(0, 100, 0)', backgroundColor: 'rgba(0, 100, 0, 0.1)', tension: 0.1, fill: true }],
        { responsive: true, plugins: { legend: { display: false } }, scales: { y: { ticks: { callback: value => '$' + value } } } }
      );

      // 2. Portfolio Allocation Chart
      const ctxPortfolio = document.getElementById('portfolioAllocationChart')?.getContext('2d');
      createChart(
        ctxPortfolio, 'doughnut',
        ['Halal Stocks', 'Sukuk', 'Halal REIT', 'Gold', 'Islamic Savings Account'],
        [{ label: 'Allocation %', data: [20, 10, 15, 35, 20], backgroundColor: ['rgba(0, 100, 0, 0.8)', 'rgba(60, 179, 113, 0.8)', 'rgba(144, 238, 144, 0.8)', 'rgba(255, 215, 0, 0.8)', 'rgba(169, 169, 169, 0.8)'], hoverOffset: 8 }],
        { responsive: true, plugins: { legend: { position: 'bottom', labels: { padding: 15 } } } }
      );
    

        // --- Smooth Scrolling handled by CSS `scroll-behavior: smooth;` ---

    }); // End DOMContentLoaded
    </script>

<!-- Additional CSS for calculators -->

<!-- JavaScript for calculator functionality -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    // ---- Simple Savings Calculator ----
    const savingsForm = document.getElementById('savings-form');
    const savingsResult = document.getElementById('savings-result');
    
    if (savingsForm && savingsResult) {
        savingsForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const initialAmount = parseFloat(document.getElementById('initial-savings').value) || 0;
            const monthlyAmount = parseFloat(document.getElementById('monthly-savings').value) || 0;
            const months = parseInt(document.getElementById('savings-duration').value) || 0;
            
            if (months <= 0) {
                savingsResult.innerHTML = '<p class="alert">Please enter a valid number of months.</p>';
                savingsResult.style.display = 'block';
                return;
            }
            
            // Simple calculation: initial + (monthly * months)
            const totalContributions = initialAmount + (monthlyAmount * months);
            const yearsDecimal = months / 12;
            const years = Math.floor(yearsDecimal);
            const remainingMonths = Math.round((yearsDecimal - years) * 12);
            
            let timeDescription = '';
            if (years > 0 && remainingMonths > 0) {
                timeDescription = `${years} year${years !== 1 ? 's' : ''} and ${remainingMonths} month${remainingMonths !== 1 ? 's' : ''}`;
            } else if (years > 0) {
                timeDescription = `${years} year${years !== 1 ? 's' : ''}`;
            } else {
                timeDescription = `${months} month${months !== 1 ? 's' : ''}`;
            }
            
            savingsResult.innerHTML = `
                <h4>Your Savings Summary</h4>
                <p class="result-summary">After ${timeDescription}, you will have saved:</p>
                <p class="result-detail"><strong>Total Savings:</strong> PKR ${totalContributions.toLocaleString()}</p>
                <p class="result-detail"><strong>Initial Investment:</strong> PKR ${initialAmount.toLocaleString()}</p>
                <p class="result-detail"><strong>Total Contributions:</strong> PKR ${(monthlyAmount * months).toLocaleString()}</p>
                <p class="result-note">Note: This simple calculation doesn't include any profit or returns.</p>
            `;
            
            savingsResult.style.display = 'block';
        });
    }
    
    // ---- Investment Calculator ----
    const investmentForm = document.getElementById('investment-form');
    const investmentResult = document.getElementById('investment-result');
    const investmentChartContainer = document.getElementById('investment-chart-container');
    let investmentChart = null;
    
    // Handle investment option selection
    const investmentOptions = document.querySelectorAll('.investment-option');
    const selectedRateInput = document.getElementById('selected-rate');
    
    if (investmentOptions && selectedRateInput) {
        investmentOptions.forEach(option => {
            option.addEventListener('click', () => {
                // Remove selected class from all options
                investmentOptions.forEach(opt => opt.classList.remove('selected'));
                
                // Add selected class to clicked option
                option.classList.add('selected');
                
                // Update hidden input with selected rate
                selectedRateInput.value = option.getAttribute('data-rate');
            });
        });
        
        // Set default selection
        investmentOptions[0].classList.add('selected');
    }
    
    if (investmentForm && investmentResult) {
        investmentForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const initialAmount = parseFloat(document.getElementById('initial-investment').value) || 0;
            const monthlyAmount = parseFloat(document.getElementById('monthly-investment').value) || 0;
            const months = parseInt(document.getElementById('investment-duration').value) || 0;
            const annualRate = parseFloat(document.getElementById('selected-rate').value) || 5;
            const monthlyRate = annualRate / 12 / 100;
            
            if (months <= 0) {
                investmentResult.innerHTML = '<p class="alert">Please enter a valid number of months.</p>';
                investmentResult.style.display = 'block';
                return;
            }
            
            // Calculate investment growth with compound interest
            let balance = initialAmount;
            let totalContributions = initialAmount;
            let monthlyData = [];
            
            for (let i = 1; i <= months; i++) {
                // Add monthly contribution
                balance += monthlyAmount;
                totalContributions += monthlyAmount;
                
                // Apply monthly profit
                balance *= (1 + monthlyRate);
                
                // Record data for chart (only store every 3rd month for longer durations)
                if (i % 3 === 0 || i === 1 || i === months) {
                    monthlyData.push({
                        month: i,
                        balance: balance
                    });
                }
            }
            
            const totalProfit = balance - totalContributions;
            const profitPercentage = (totalProfit / totalContributions) * 100;
            
            const yearsDecimal = months / 12;
            const years = Math.floor(yearsDecimal);
            const remainingMonths = Math.round((yearsDecimal - years) * 12);
            
            let timeDescription = '';
            if (years > 0 && remainingMonths > 0) {
                timeDescription = `${years} year${years !== 1 ? 's' : ''} and ${remainingMonths} month${remainingMonths !== 1 ? 's' : ''}`;
            } else if (years > 0) {
                timeDescription = `${years} year${years !== 1 ? 's' : ''}`;
            } else {
                timeDescription = `${months} month${months !== 1 ? 's' : ''}`;
            }
            
            // Find selected investment option text
            let selectedOption = 'Selected Investment';
            document.querySelectorAll('.investment-option').forEach(option => {
                if (option.classList.contains('selected')) {
                    selectedOption = option.innerText.split('\n')[0];
                }
            });
            
            investmentResult.innerHTML = `
                <h4>${selectedOption} Growth Summary</h4>
                <p class="result-summary">After ${timeDescription} at ${annualRate}% annual profit rate:</p>
                <p class="result-detail"><strong>Final Balance:</strong> PKR ${Math.round(balance).toLocaleString()}</p>
                <p class="result-detail"><strong>Total Contributions:</strong> PKR ${Math.round(totalContributions).toLocaleString()}</p>
                <p class="result-detail"><strong>Total Profit:</strong> PKR ${Math.round(totalProfit).toLocaleString()} (${profitPercentage.toFixed(2)}%)</p>
                <p class="result-note">Note: Historical returns are not indicative of future performance. These calculations are for illustrative purposes only.</p>
            `;
            
            investmentResult.style.display = 'block';
            
            // Create chart
            if (window.Chart) {
                createInvestmentChart(monthlyData, selectedOption);
                investmentChartContainer.style.display = 'block';
            }
        });
    }
    
    // Create investment chart
    function createInvestmentChart(data, title) {
        const ctx = document.getElementById('investmentChart')?.getContext('2d');
        
        if (!ctx) return;
        
        // Destroy previous chart if exists
        if (investmentChart) {
            investmentChart.destroy();
        }
        
        // Format labels for X axis (convert months to years if appropriate)
        const labels = data.map(item => {
            if (item.month < 12) {
                return `Month ${item.month}`;
            } else {
                const years = Math.floor(item.month / 12);
                const months = item.month % 12;
                if (months === 0) {
                    return `Year ${years}`;
                } else {
                    return `Y${years}M${months}`;
                }
            }
        });
        
        investmentChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Balance (PKR)',
                    data: data.map(item => item.balance),
                    borderColor: 'rgb(0, 100, 0)',
                    backgroundColor: 'rgba(0, 100, 0, 0.1)',
                    tension: 0.1,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: `${title} Growth Projection`,
                        font: {
                            size: 16
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const value = context.raw;
                                return `Balance: PKR ${Math.round(value).toLocaleString()}`;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                if (value >= 1000000) {
                                    return 'PKR ' + (value / 1000000).toFixed(1) + 'M';
                                } else if (value >= 1000) {
                                    return 'PKR ' + (value / 1000).toFixed(1) + 'K';
                                }
                                return 'PKR ' + value;
                            }
                        }
                    }
                }
            }
        });
    }
});
</script>
    
    
    
</body>
</html>