<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FBR Tax Portal</title>
    <style>
        :root {
            --primary-green: #006400;
            --secondary-green: #008000;
            --dark-green: #004d00;
            --light-bg: #f5f5f5;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
        }

        body {
            background-color: var(--light-bg);
        }

        /* Header Styles */
        .header {
            background: var(--primary-green);
            padding: 1rem 2rem;
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .nav {
            display: flex;
            gap: 3rem;
            align-items: center;
        }

        /* Dropdown Structure */
        .dropdown {
            position: relative;
            cursor: pointer;
            padding: 1rem 0;
        }

        .dropdown:hover .dropdown-menu {
            display: block;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            min-width: 250px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .dropdown-item {
            padding: 12px 20px;
            color: var(--primary-green);
            border-bottom: 1px solid #eee;
            position: relative;
        }

        .dropdown-item:hover {
            background: #f8f8f8;
        }

        .nested-dropdown .dropdown-menu {
            left: 100%;
            top: 0;
        }

        /* Calculator Styles */
        .calculator-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .calculator {
            display: none;
        }

        .calculator.active {
            display: block;
        }

        .input-group {
            margin: 1rem 0;
        }

        input, select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 0.5rem 0;
        }

        button {
            background: var(--secondary-green);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background: var(--dark-green);
        }

        .result {
            margin-top: 1rem;
            padding: 1rem;
            background: #f8f8f8;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .nav {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .dropdown-menu {
                position: static;
                box-shadow: none;
            }
        }
    </style>
</head>
<body>
    <!-- Header Component -->
    <header class="header">
        <nav class="nav">
            <div class="dropdown">
                <span>Tax Calculators â–¼</span>
                <div class="dropdown-menu" id="mainMenu"></div>
            </div>
        </nav>
    </header>

    <!-- Calculator Container -->
    <main class="calculator-container" id="mainContent"></main>

    <!-- Calculator Templates -->
    <template id="incomeTaxTemplate">
        <div class="calculator">
            <h2>Income Tax Calculator</h2>
            <div class="input-group">
                <input type="number" id="grossSalary" placeholder="Gross Annual Salary (PKR)">
            </div>
            <button onclick="calculateIncomeTax()">Calculate</button>
            <div class="result" id="incomeTaxResult"></div>
        </div>
    </template>

    <template id="salesTaxTemplate">
        <div class="calculator">
            <h2>Sales Tax Calculator</h2>
            <div class="input-group">
                <input type="number" id="saleAmount" placeholder="Total Sale Amount (PKR)">
            </div>
            <button onclick="calculateSalesTax()">Calculate</button>
            <div class="result" id="salesTaxResult"></div>
        </div>
    </template>

    <template id="capitalGainsTemplate">
        <div class="calculator">
            <h2>Capital Gains Tax Calculator</h2>
            <div class="input-group">
                <input type="number" id="purchasePrice" placeholder="Purchase Price (PKR)">
                <input type="number" id="salePrice" placeholder="Sale Price (PKR)">
            </div>
            <button onclick="calculateCapitalGains()">Calculate</button>
            <div class="result" id="capitalGainsResult"></div>
        </div>
    </template>

    <template id="stampDutyTemplate">
        <div class="calculator">
            <h2>Stamp Duty Calculator</h2>
            <div class="input-group">
                <input type="number" id="propertyValue" placeholder="Property Value (PKR)">
            </div>
            <button onclick="calculateStampDuty()">Calculate</button>
            <div class="result" id="stampDutyResult"></div>
        </div>
    </template>

    <script>
        // Calculator Configuration
        const taxConfig = {
            categories: {
                salaried: {
                    name: "Salaried Class",
                    calculators: {
                        incomeTax: {
                            name: "Income Tax Calculator",
                            template: "incomeTaxTemplate"
                        },
                        allowances: {
                            name: "Allowances Calculator",
                            template: "allowancesTemplate"
                        }
                    }
                },
                business: {
                    name: "Business Class",
                    calculators: {
                        salesTax: {
                            name: "Sales Tax Calculator",
                            template: "salesTaxTemplate"
                        },
                        withholdingTax: {
                            name: "Withholding Tax Calculator",
                            template: "withholdingTaxTemplate"
                        },
                        corporateTax: {
                            name: "Corporate Tax Calculator",
                            template: "corporateTaxTemplate"
                        }
                    }
                },
                investor: {
                    name: "Investor Class",
                    calculators: {
                        capitalGains: {
                            name: "Capital Gains Tax",
                            template: "capitalGainsTemplate"
                        },
                        stampDuty: {
                            name: "Stamp Duty",
                            template: "stampDutyTemplate"
                        },
                        dividendTax: {
                            name: "Dividend Tax",
                            template: "dividendTaxTemplate"
                        }
                    }
                }
            }
        };

        // Initialize Navigation
        function initNavigation() {
            const mainMenu = document.getElementById('mainMenu');
            
            for(const category of Object.values(taxConfig.categories)) {
                const categoryItem = createDropdownItem(category.name);
                const subMenu = document.createElement('div');
                subMenu.className = 'dropdown-menu';
                
                for(const calculator of Object.values(category.calculators)) {
                    const calculatorItem = createDropdownItem(calculator.name, () => {
                        loadCalculator(calculator.template);
                    });
                    subMenu.appendChild(calculatorItem);
                }
                
                categoryItem.appendChild(subMenu);
                mainMenu.appendChild(categoryItem);
            }
        }

        function createDropdownItem(text, onClick) {
            const item = document.createElement('div');
            item.className = 'dropdown-item';
            item.textContent = text;
            if(onClick) item.onclick = onClick;
            return item;
        }

        // Calculator Loader
        function loadCalculator(templateId) {
            const container = document.getElementById('mainContent');
            const template = document.getElementById(templateId);
            if(!template) {
                container.innerHTML = "<p>Calculator under development</p>";
                return;
            }
            container.innerHTML = '';
            container.appendChild(template.content.cloneNode(true));
        }

        // Calculation Functions
        function calculateIncomeTax() {
            const salary = parseFloat(document.getElementById('grossSalary').value);
            if(!salary) return;
            
            let tax = 0;
            if(salary > 1200000) {
                tax = (salary - 1200000) * 0.25 + 90000;
            } else if(salary > 600000) {
                tax = (salary - 600000) * 0.15;
            }
            
            document.getElementById('incomeTaxResult').innerHTML = `
                <h4>Tax Calculation:</h4>
                <p>Annual Tax Payable: PKR ${tax.toLocaleString()}</p>
                <p>Monthly Deduction: PKR ${(tax/12).toLocaleString()}</p>
            `;
        }

        function calculateSalesTax() {
            const amount = parseFloat(document.getElementById('saleAmount').value);
            const tax = amount * 0.17;
            document.getElementById('salesTaxResult').innerHTML = `
                Sales Tax Payable (17%): PKR ${tax.toLocaleString()}
            `;
        }

        function calculateCapitalGains() {
            const purchase = parseFloat(document.getElementById('purchasePrice').value);
            const sale = parseFloat(document.getElementById('salePrice').value);
            const gain = sale - purchase;
            const tax = Math.max(gain * 0.125, 0);
            document.getElementById('capitalGainsResult').innerHTML = `
                Capital Gains Tax (12.5%): PKR ${tax.toLocaleString()}
            `;
        }

        function calculateStampDuty() {
            const value = parseFloat(document.getElementById('propertyValue').value);
            const duty = value * 0.02;
            document.getElementById('stampDutyResult').innerHTML = `
                Stamp Duty Payable (2%): PKR ${duty.toLocaleString()}
            `;
        }

        // Initialize Application
        window.onload = initNavigation;
    </script>
</body>
</html>
